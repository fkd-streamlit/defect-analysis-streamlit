# Defect Analysis Streamlit App
（射出成形材料断面：空隙・欠陥解析アプリ）

## 概要
本アプリは、射出成形材料断面画像を対象として  
**材料内部に存在する空隙（欠陥）を画像処理により抽出・可視化し、  
欠陥率（面積比）を定量評価**するための Streamlit アプリです。

機械学習は用いず、  
**説明可能な画像処理（コントラスト強調・形態学的処理）**に基づいて  
再現性の高い評価を行うことを目的としています。

---

## 主な機能
- 画像アップロード（単体 / 複数 / ZIP）
- コントラスト調整（CLAHE + Gaussian）
- 材料領域の自動抽出（最大連結成分）
- 欠陥（空隙）検出  
  - 元画像中の **深い黒点（ブラックハット法）**
- 欠陥領域の輪郭オーバーレイ表示（赤）
- 欠陥の形状・面積計測
- **欠陥率（A案）算出**
- CSV 出力（欠陥特性・欠陥率サマリー）
- Streamlit Cloud 上でのWeb実行

※ 本リポジトリの docs/ 配下に、実運用者向けの詳細操作マニュアル（docx）を格納しています。
``
---

## 欠陥の定義
本アプリで扱う欠陥（空隙）は以下のように定義されます。

> **材料内部に存在し、周囲より十分に暗い局所的黒点**  
> （研磨ムラや背景ノイズを除外したもの）

材料領域を自動抽出した上で、  
ブラックハット変換により「深い黒」を強調し、  
しきい値・最小面積条件によって欠陥を確定します。

---

## 欠陥率の定義（A案）
欠陥率 [%] ＝ 欠陥総面積 ÷ 材料面積 × 100

GitHub の main ブランチ更新時に自動で再デプロイされます。

---

## 注意事項
- 本アプリは **材料内部の空隙（内部欠陥）** を主対象としています。
- 外周欠け・表面欠陥は原理的に含まれません。
- 評価結果は撮像条件・研磨状態に依存します。
- 品質保証用途では条件固定での運用を推奨します。
---
※ 本リポジトリの docs/ 配下に、実運用者向けの詳細操作マニュアル（docx）を格納しています。
``
---
<img width="650" height="163" alt="image" src="https://github.com/user-attachments/assets/cae31a53-29c4-4ece-8a4f-cc58842fb51b" />
今の画像に対する具体的おすすめ初期セット
まずはこれを試してください：
•	✅ 欠陥方式：元画像の深い黒点（ブラックハット）
•	✅ ブラックハット 手動しきい値：40
•	✅ ブラックハット カーネルサイズ：15
•	✅ 欠陥Open：カーネル2 / 回数1
•	✅ 最小面積：20 px²
•	✅ 輪郭のみ表示：ON（評価しやすい）
________________________________________
最後に（重要な安心材料）
✅ 「欠陥を取りに行けている証拠」 です。
•	ブラックハットが効いていない → 調整不能
•	効きすぎている → しぼれる

---
## 作者
- GitHub: fkd-streamlit
